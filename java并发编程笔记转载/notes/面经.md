# 面经

## 自如网

- Java 开发岗
- 经验要求 1 ~ 3 年（题主经验一年）

将台路，下了地铁直奔普天实业创新园。一楼前台给了一份表格、一份面试题和一个身份卡，然后上了三楼做题。题目说实话真的没想到，感觉是好几年前的题了，竟然还有存储过程，简单做了做题就叫过去面试了。  

面试官上来让做自我介绍，简单说了说，就开始对着简历问我项目方面的问题了。顺便说一句，题主之前呆的公司都是小公司，单体应用，没并发没集群，写业务居多。我简历上写着做过系统优化，面试官就问我有哪些优化。我说主要是数据查询的优化，使用过线程本地变量，跑过执行计划分析优化 SQL。面试官就问我线程本地变量是啥，我当时一愣，卧槽不都这么叫的么，我说就是 `ThreadLocal`。然后面试官就说那你说说你对 `ThreadLocal` 的理解。说完 `ThreadLocal` 之后，面试官又说你这系统优化没啥营养，说实话，我优化确实做的不是很多，总之是半吹半真吧，这个话题也就终结了。然后面试官又说，Redis 用过吧，说说它有哪些数据结构。当时题主正巧在学习 Redis，刚学了两个数据结构 Sds 和 双端链表，就很详细的讲了讲。讲完之后，面试官话题一转，你说一下那个 HashMap 吧，谈谈对它的理解。然后题主就从 HashMap 的数据结构讲到它的哈希算法，以及哈希冲突的解决。然后又问对于 HashMap 的调优这块有过了解吗？题主就从初始容量讲到负载因子的调整。然后面试官又问，`concurrentHashMap` 了解吧，题主那时还没怎么学过，就说没仔细研究过，然后面试官又说，它的包下有很多并发相关的类，都有过研究吗？我就说有研究过，然后面试官直接就问，`synchronized` 与 `ReentrantLock` 有啥区别，正好题主也仔细研究过，就从监视器锁讲到 AQS，又讲了讲可重入锁的获取锁可中断、可等待、需要手动释放锁等。然后面试官又问，CAS 了解过吗？我就详细讲了一下 CAS 操作，然后面试官又问，了解 `volatile` 吗？（`volatile` 发音还不对，我确认了好几遍才知道是它）。然后我就从禁止指令重排序讲到可见性，然后讲了它如何保证的可见性。然后面试官又问，分布式和微服务做过吗，我心想该来的还是来了，只能回答自己工作之余做过一些练手，所以这个话题也就到此为止了。  

写了半天发现跟流水帐似的，还是把问题单独列出来吧。  

- `ThreadLocal` 的理解  
我觉得至少得理解到它内部使用了弱引用，以及为何使用弱引用。还有可能存在的内存泄露问题。  
- `HashMap` 的理解  
数据结构要清楚，然后就是哈希算法和哈希冲突的解决，以及 HashMap 的简单优化。  
- `ConcurrentHashMap` 的理解
- Redis 的数据结构  
那几个数据结构都要说出来，还有就是 Redis 中有哪些类型以及使用场景。  
- `synchronized` 和 `ReentrantLock` 的理解  
它俩的原理要理解，一个是通过对象的监视器锁实现的，一个依赖的 AQS 实现的。还有锁的优化，以及它俩的区别，应用场景等。  
- `volatile` 的理解  
禁止指令重排序和可见性要说的。
- CAS 操作  
CAS 是啥得知道，以及它可能会出现的 ABA 问题。  
- JVM 调优  
这玩意儿也问，我觉得有点过分，不过简单的调优懂点会比较好。比如在线程竞争比较严重时取消偏向锁。  
- 分布式和微服务  
这个就需要去了解 Dubbo 和 Zookeeper 了。还有就是分布式文件系统、分布式事务锁、session 共享以及 RPC 的使用等等，都没怎么接触过，以后慢慢学吧。  

**总结：**
这次面试使自如给我的印象很不好，首先是笔试题，感觉就是几年前的题，还一直不换，而且面试官从头到尾也没问笔试的东西。再有就是通过面试中的交流，发现面试官很多东西研究的并不是很深入，而且单词还发错音，不是我发音有问题，而是他真的发音很过分，后来我说了一遍后他才纠正。总的来说，面试的问题还是顺着简历来的，其中可能会有跳跃式的提问，没有步步深入。然后我个人也存在很多问题，项目经验一直是我的痛点，还有就是该去了解一下分布式与微服务了，哪怕搭个架子也算有所了解了。  
